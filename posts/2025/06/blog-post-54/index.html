<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Tabulating 6-DOF Motion Kinematics in OpenFOAM using Python | Shubham Goswami, PhD </title> <meta name="author" content="Shubham Goswami, PhD"> <meta name="description" content="Personal and professional website of Shubham Goswami, PhD. "> <link rel="stylesheet" href="/goswami-13/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/goswami-13/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/goswami-13/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/goswami-13/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/goswami-13/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://goswami-13.github.io/goswami-13/posts/2025/06/blog-post-54/"> <script src="/goswami-13/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/goswami-13/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" integrity="sha256-q9ba7o845pMPFU+zcAll8rv+gC+fSovKsOoNQ6cynuQ=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css" integrity="sha256-Oppd74ucMR5a5Dq96FxjEzGF7tTw2fZ/6ksAqDCM8GY=" crossorigin="anonymous" media="screen and (prefers-color-scheme: light)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" integrity="sha256-nyCNAiECsdDHrr/s2OQsp5l9XeY2ZJ0rMepjCT2AkBk=" crossorigin="anonymous" media="screen and (prefers-color-scheme: dark)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/css/diff2html.min.css" integrity="sha256-IMBK4VNZp0ivwefSn51bswdsrhk0HoMTLc2GqFHFBXg=" crossorigin="anonymous"> <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css"> <script src="/goswami-13/assets/js/distillpub/template.v2.js"></script> <script src="/goswami-13/assets/js/distillpub/transforms.v2.js"></script> <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "Tabulating 6-DOF Motion Kinematics in OpenFOAM using Python",
            "description": "",
            "published": "June 01, 2025",
            "authors": [
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/goswami-13/"> <span class="font-weight-bold">Shubham</span> Goswami, PhD </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/goswami-13/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/goswami-13/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/goswami-13/blog/">Guides </a> </li> <li class="nav-item "> <a class="nav-link" href="/goswami-13/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/goswami-13/teaching/">Teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Tabulating 6-DOF Motion Kinematics in OpenFOAM using Python</h1> <p></p> </d-title> <d-article> <p>The overset mesh approach in OpenFOAM is a powerful tool for simulating complex motion scenarios. Among its many features, the <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> kinematics definition offers precise control over six degrees of freedom, enabling seamless integration of pre-defined motion data into simulations. This blog explores the fundamentals and implementation of this method, leveraging Python for tabulating the motion kinematics. By leveraging <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code>, engineers and researchers can unlock advance mesh motion capabalities using overset mesh approach and OpenFOAM.</p> <figure> <img src="https://goswami-13.github.io/images/2025/Blog12/BlogLogo.gif" width="80%"> </figure> <p>Simulating complex motion in CFD often requires precise control over how objects move within the computational domain. While standard prescribed motion definitions in OpenFOAM, such as <code class="language-plaintext highlighter-rouge">oscillatingDisplacement</code> or <code class="language-plaintext highlighter-rouge">angularOscillatingDisplacement</code>, can handle simple heaving or pitching motions, they fall short when dealing with intricate, multi-degree-of-freedom scenarios. One of such scenatios is mixed-motion such as heaving and pitching cylinder. These methods lack the flexibility to accommodate dynamically evolving motion that depends on pre-tabulated or real-world data.</p> <p>The <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> kinematics definition addresses these limitations by allowing users to prescribe motion across all six degrees of freedom, three translational and three rotational, using time-series data. This approach is particularly valuable for cases where motion is complex, irregular, or influenced by external factors. In this blog, we explore how <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> integrates seamlessly with the overset mesh framework in OpenFOAM, enabling accurate and efficient simulation of dynamic systems. Additionally, we explore how Python can be used to prepare the required motion input files. For demonstration, I will again use the example of an oscillating square cylinder with a prescribed frequency. Download the case from my GitHub repository <a href="https://github.com/goswami-13/Overset_Base" rel="external nofollow noopener" target="_blank">here</a>.</p> <p>In this article, I will build upon my previous post on setting up overset mesh cases in OpenFOAM. For more detailed information, feel free to refer to that article.</p> <p>Lets begin!!!</p> <h1 id="understanding-tabulated6dofmotion">Understanding tabulated6DoFMotion</h1> <p>The <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> kinematics definition in OpenFOAM is a powerful tool for simulating complex, multi-dimensional motion. Unlike simpler prescribed motion methods, which are typically limited to angular or heaving patterns, this approach allows users to define motion across six degrees of freedom: three translational (x, y, z) and three rotational (roll, pitch, yaw).</p> <p>What sets this method apart is its ability to handle pre-tabulated motion data, where both the position and orientation of the object are specified as a function of time. This makes it particularly useful for scenarios involving irregular motion or where the motion is predefined through experimental measurements, analytical models, or external simulations. The motion data is typically stored in a plain text file or table, with each row representing a time step, accompanied by the corresponding values for translational and rotational displacements. During the simulation, OpenFOAM interpolates this data to ensure smooth and accurate movement of the mesh or object. By integrating the <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> definition with the overset mesh framework, users can effectively simulate dynamic systems, such as vehicles, marine vessels, or machinery components—without sacrificing computational efficiency or accuracy.</p> <p>The format for tabulated motion data in OpenFOAM is as follows: Each time step is specified with the reference time, followed by two groups of values: one for linear displacement and the other for angular displacement.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">4</span> <span class="c1">//number of data points in the file </span>
<span class="c1">//Position formatting is not important. File is based on the character sequence only. </span>
<span class="c1">//Vectors are not relative. Each vector is total displacement and total rotation.</span>
<span class="p">(</span>
<span class="c1">//(time_point ( (linear displacement vector) (rotation vector roll-yaw-pitch) ) )</span>
<span class="c1">//(seconds ( (following unit system, usually meters) (degrees) ) )</span>
<span class="p">(</span><span class="mi">0</span> <span class="p">(</span> <span class="p">(</span><span class="mf">0.25</span> <span class="mf">0.50</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">(</span><span class="mf">0.220</span> <span class="mf">0.30</span> <span class="mf">0.40</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
<span class="p">(</span><span class="mf">0.25</span> <span class="p">(</span> <span class="p">(</span><span class="mf">0.50</span> <span class="mf">1.0</span> <span class="mf">2.0</span><span class="p">)</span> <span class="p">(</span><span class="mf">0.60</span> <span class="mf">0.60</span> <span class="mf">0.60</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
<span class="p">(</span><span class="mf">0.75</span> <span class="p">(</span> <span class="p">(</span><span class="mf">0.75</span> <span class="mf">5.0</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">(</span><span class="mf">1.2</span> <span class="mf">2.4</span> <span class="mf">5.0</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
<span class="p">(</span><span class="mf">10.0</span> <span class="p">(</span> <span class="p">(</span><span class="mf">0.1</span> <span class="mf">6.0</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">(</span><span class="mf">5.0</span> <span class="mf">3.0</span> <span class="mf">5.5</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div> <p>This file is typically stored as a <code class="language-plaintext highlighter-rouge">.dat</code> file within the <code class="language-plaintext highlighter-rouge">&lt;Case&gt;/constant/</code> directory. Once the motion is defined using this method, the tabulated data is read into the <code class="language-plaintext highlighter-rouge">dynamicMeshDict</code> file by specifying the <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> motion function, as shown below:</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  v2412                                 |
|   \\  /    A nd           | Website:  www.openfoam.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/</span>
<span class="n">FoamFile</span>
<span class="p">{</span>
	  <span class="n">version</span>     <span class="mf">2.0</span><span class="p">;</span>
    <span class="n">format</span>      <span class="n">ascii</span><span class="p">;</span>
    <span class="k">class</span>       <span class="nc">dictionary</span><span class="p">;</span>
    <span class="n">object</span>      <span class="n">dynamicMeshDict</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //</span>

<span class="n">dynamicFvMesh</span>       <span class="n">dynamicOversetFvMesh</span><span class="p">;</span>

<span class="n">dynamicOversetFvMeshCoeffs</span>
<span class="p">{</span>
<span class="c1">//    layerRelax 0.3;</span>
<span class="p">}</span>

<span class="n">solver</span>          <span class="n">multiSolidBodyMotionSolver</span><span class="p">;</span>

<span class="n">multiSolidBodyMotionSolverCoeffs</span>
<span class="p">{</span>
    <span class="n">movingZone</span>
    <span class="p">{</span>	
		    <span class="n">solidBodyMotionFunction</span> <span class="n">tabulated6DoFMotion</span><span class="p">;</span>
        <span class="n">CofG</span>       <span class="p">(</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="p">);</span>
		    <span class="n">timeDataFileName</span>	<span class="s">"$FOAM_CASE/constant/pitchplunge.dat"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ************************************************************************* //</span>
</code></pre></div></div> <p>Now, let’s create a similar motion file using Python!</p> <h1 id="calculating-motion-kinematics-using-python">Calculating Motion Kinematics using Python</h1> <p>Generating a <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> file can be streamlined using Python, particularly when motion data is derived from mathematical models, experimental results, or external simulations. Python’s flexibility allows for the automation of the motion table creation, ensuring both accuracy and consistency. Additionally, Python’s versatility enables integration with real-world datasets, expanding the scope of this method even further.</p> <p>To begin, we’ll import the necessary Python modules in a Jupyter notebook:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">matplotlib.colors</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">fluidfoam</span> <span class="k">as</span> <span class="n">fl</span>
<span class="kn">import</span> <span class="n">scipy</span> <span class="k">as</span> <span class="n">sp</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">matplotlib.animation</span> <span class="k">as</span> <span class="n">animation</span>
<span class="kn">import</span> <span class="n">pyvista</span> <span class="k">as</span> <span class="n">pv</span>
<span class="kn">import</span> <span class="n">imageio</span>
<span class="kn">import</span> <span class="n">io</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="sh">'</span><span class="s">font.size</span><span class="sh">'</span> <span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="sh">'</span><span class="s">font.family</span><span class="sh">'</span> <span class="p">:</span> <span class="sh">'</span><span class="s">Times New Roman</span><span class="sh">'</span><span class="p">,</span> <span class="sh">"</span><span class="s">text.usetex</span><span class="sh">"</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
</code></pre></div></div> <p>Next, we define the motion parameters. The type of motion we are prescribing needs to be known. In this example, we will use the case of a heaving square cylinder. For translational motion, we define the following:</p> \[x(t) = z(t) = 0, y(t) = A sin(2\pi f t)\] <p>For the rotational motion, we define Roll ($\phi$ ϕ), Pitch ($\theta$ θ), and Yaw ($\psi$ ψ) as:</p> \[\phi(t) = \psi(t) = 0, \theta(t) = \theta_0 sin(2\pi f t + \Phi)\] <p>In this case, $\Phi$ Φ is the phase angle.</p> <p>We choose an amplitude (A) of 0.05 and a heaving frequency (f) of 1. The simulation will run for 2 periods of motion. <strong>This method requires the definition of a time step.</strong> Here, we choose a time step ($\Delta t$) of 0.004, and set $\Phi$ Φ and $\theta_0$ θ0 to 0.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="n">f</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">omega</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span><span class="o">*</span><span class="n">f</span>
<span class="n">Period</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">f</span>
<span class="n">TotalNumberOfPeriods</span> <span class="o">=</span> <span class="mf">2.1</span>
<span class="n">TotalTime</span> <span class="o">=</span> <span class="n">TotalNumberOfPeriods</span><span class="o">*</span><span class="n">Period</span>
<span class="n">deltaT</span> <span class="o">=</span> <span class="mf">0.004</span>
<span class="n">Theta0</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Phi</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">TotalTime</span><span class="o">/</span><span class="n">deltaT</span><span class="p">)</span> <span class="c1">#this is our time resolution, the number of data points our file will have
</span></code></pre></div></div> <p>Now, let’s define the time vector:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">TotalTime</span><span class="p">,</span> <span class="n">deltaT</span><span class="p">)</span>
</code></pre></div></div> <p>Next, we define the linear and rotational displacement vectors:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#linear displacement
</span><span class="n">linearDisplacement</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Time</span><span class="sh">'</span><span class="p">])</span>
<span class="n">linearDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">X</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">linearDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">Y</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">sin</span><span class="p">(</span><span class="n">omega</span> <span class="o">*</span> <span class="n">time</span><span class="p">)</span>
<span class="n">linearDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">#rotational displacement
</span><span class="n">rotationalDisplacement</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Time</span><span class="sh">'</span><span class="p">])</span>
<span class="n">rotationalDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">phi</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">rotationalDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">psi</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">rotationalDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">theta</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sin</span><span class="p">((</span><span class="n">omega</span> <span class="o">*</span> <span class="n">time</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">Phi</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>
</code></pre></div></div> <p>Finally, we save the motion file, adding the appropriate brackets and formatting as required by OpenFOAM:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">F:/Moving_Meshes_OFTest/OverSet_HeavePitch/Motion.dat</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="s">(</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">resolution</span><span class="p">):</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">'</span><span class="s">(</span><span class="sh">'</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">time</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="s">((</span><span class="sh">'</span> <span class="o">+</span> 
                <span class="nf">str</span><span class="p">(</span><span class="n">linearDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">X</span><span class="sh">'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> 
                <span class="nf">str</span><span class="p">(</span><span class="n">linearDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">Y</span><span class="sh">'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> 
                <span class="nf">str</span><span class="p">(</span><span class="n">linearDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">Z</span><span class="sh">'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="s">)(</span><span class="sh">'</span> <span class="o">+</span> 
                <span class="nf">str</span><span class="p">(</span><span class="n">rotationalDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">phi</span><span class="sh">'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> 
                <span class="nf">str</span><span class="p">(</span><span class="n">rotationalDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">psi</span><span class="sh">'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="s"> </span><span class="sh">'</span> <span class="o">+</span> 
                <span class="nf">str</span><span class="p">(</span><span class="n">rotationalDisplacement</span><span class="p">[</span><span class="sh">'</span><span class="s">theta</span><span class="sh">'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="sh">'</span><span class="s">)))</span><span class="sh">'</span> <span class="o">+</span> 
                <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">'</span><span class="s">)</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <p><strong>Important Note:</strong> Defining the motion in this way makes the <code class="language-plaintext highlighter-rouge">endTime</code> parameter in your <code class="language-plaintext highlighter-rouge">&lt;Case&gt;/system/controlDict</code> obsolete. As such, the <code class="language-plaintext highlighter-rouge">endTime</code> in this case will be the final time specified in the <code class="language-plaintext highlighter-rouge">Motion.dat</code> file.</p> <h1 id="running-the-simulation">Running the Simulation</h1> <p>Running the simulation is simple. Follow the steps for running an overset simulation as described in my previous article:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Generate Meshes</span>
<span class="nb">cd </span>background/
fluent3DMeshToFoam Background.msh
<span class="nb">cd</span> ../overset/
fluent3DMeshToFoam Square.msh
<span class="nb">cd</span> ../background/

<span class="c"># merge meshes</span>
mergeMeshes <span class="nb">.</span> ../overset/ <span class="nt">-overwrite</span>

<span class="c"># Toposet and setFields</span>
topoSet
setFields
topoSet <span class="nt">-dict</span> system/topoSetDict_movingZone

<span class="c"># Run Simulation</span>
overPimpleDyMFoam
</code></pre></div></div> <p>The motion we defined should look as shown below:</p> <figure> <img src="https://goswami-13.github.io/images/2025/Blog12/OS_Anim.gif" width="80%"> </figure> <p>You can modify the heaving and pitching motion by adjusting the initial angle and phase angle accordingly.</p> <figure> <img src="https://goswami-13.github.io/images/2025/Blog12/HeavePitch.gif" width="80%"> </figure> <p>The combination of overset mesh and <code class="language-plaintext highlighter-rouge">tabulated6DoFMotion</code> in OpenFOAM offers an advanced framework for simulating dynamic systems with complex motion. By enabling six degrees of freedom and accommodating pre-tabulated motion data, this approach overcomes the limitations of standard prescribed motion definitions, providing unparalleled flexibility and accuracy. From setting up overset regions to defining motion data with Python, this blog has walked through the key steps for implementing such cases.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/goswami-13/assets/bibliography/"></d-bibliography> <d-article> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/goswami-13/posts/2025/06/blog-post-53/">Setting Up Overset Mesh Cases in OpenFOAM Made Easy</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/goswami-13/posts/2025/06/blog-post-52/">An Introduction to Overset Mesh in OpenFOAM</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/goswami-13/posts/2025/05/blog-post-51/">Python Tools for Analyzing and Visualizing Mesh Motion Simulations</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/goswami-13/posts/2025/03/blog-post-50/">Simulating Pure Pitching and Heaving Motions in OpenFOAM</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/goswami-13/posts/2025/03/blog-post-49/">Dynamic Meshes in OpenFOAM: A Deep Dive into Prescribed Mesh Motion</a> </li> <br> <br> <div id="giscus_thread"> <script defer src="/goswami-13/assets/js/giscus-setup.js"></script> <noscript> Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </d-article> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shubham Goswami, PhD. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/goswami-13/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script src="/goswami-13/assets/js/distillpub/overrides.js"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/mermaid-setup.js?38ca0a0126f7328d2d9a46bad640931f" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/js/diff2html-ui.min.js" integrity="sha256-eU2TVHX633T1o/bTQp6iIJByYJEtZThhF9bKz/DcbbY=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/diff2html-setup.js?80a6e52ce727518bbd3aed2bb6ba5601" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js" integrity="sha256-MgH13bFTTNqsnuEoqNPBLDaqxjGH+lCpqrukmXc8Ppg=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/leaflet-setup.js?b6313931e203b924523e2d8b75fe8874" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" integrity="sha256-0q+JdOlScWOHcunpUk21uab1jW7C1deBQARHtKMcaB4=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/chartjs-setup.js?183c5859923724fb1cb3c67593848e71" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js" integrity="sha256-QvgynZibb2U53SsVu98NggJXYqwRL7tg3FeyfXvPOUY=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/theme/dark-fresh-cut.js" integrity="sha256-sm6Ui9w41++ZCWmIWDLC18a6ki72FQpWDiYTDxEPXwU=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/echarts-setup.js?738178999630746a8d0cfc261fc47c2c" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega@5.27.0/build/vega.min.js" integrity="sha256-Yot/cfgMMMpFwkp/5azR20Tfkt24PFqQ6IQS+80HIZs=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3/build/vega-lite.min.js" integrity="sha256-TvBvIS5jUN4BSy009usRjNzjI1qRrHPYv7xVLJyjUyw=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-embed@6.24.0/build/vega-embed.min.js" integrity="sha256-FPCJ9JYCC9AZSpvC/t/wHBX7ybueZhIqOMjpWqfl3DU=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/vega-setup.js?7c7bee055efe9312afc861b128fe5f36" type="text/javascript"></script> <script defer src="https://tikzjax.com/v1/tikzjax.js" integrity="sha256-+1qyucCXRZJrCg3lm3KxRt/7WXaYhBid4/1XJRHGB1E=" crossorigin="anonymous"></script> <script src="/goswami-13/assets/js/typograms.js?062e75bede72543443762dc3fe36c7a5"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/goswami-13/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/goswami-13/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/goswami-13/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/goswami-13/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/goswami-13/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/goswami-13/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/goswami-13/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/goswami-13/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/goswami-13/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/goswami-13/assets/js/search-data.js"></script> <script src="/goswami-13/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>
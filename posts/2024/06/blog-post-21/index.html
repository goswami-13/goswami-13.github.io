<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> A Guide to Prepping Your OpenFOAM Case for Modal Decompositions | Shubham Goswami, PhD </title> <meta name="author" content="Shubham Goswami, PhD"> <meta name="description" content="Personal and professional website of Shubham Goswami, PhD. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://goswami-13.github.io/posts/2024/06/blog-post-21/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" integrity="sha256-q9ba7o845pMPFU+zcAll8rv+gC+fSovKsOoNQ6cynuQ=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css" integrity="sha256-Oppd74ucMR5a5Dq96FxjEzGF7tTw2fZ/6ksAqDCM8GY=" crossorigin="anonymous" media="screen and (prefers-color-scheme: light)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" integrity="sha256-nyCNAiECsdDHrr/s2OQsp5l9XeY2ZJ0rMepjCT2AkBk=" crossorigin="anonymous" media="screen and (prefers-color-scheme: dark)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/css/diff2html.min.css" integrity="sha256-IMBK4VNZp0ivwefSn51bswdsrhk0HoMTLc2GqFHFBXg=" crossorigin="anonymous"> <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css"> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "A Guide to Prepping Your OpenFOAM Case for Modal Decompositions",
            "description": "",
            "published": "June 04, 2024",
            "authors": [
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Shubham</span> Goswami, PhD </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Guides </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>A Guide to Prepping Your OpenFOAM Case for Modal Decompositions</h1> <p></p> </d-title> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> </nav> </d-contents> <p>Unlocking the secrets within your OpenFOAM data goes beyond just post-processing numbers. Modal decomposition methods offer a powerful lens to analyze your simulations, revealing hidden patterns and dominant flow features. This guide will equip you with the knowledge to set up an OpenFOAM case specifically designed for modal decomposition analysis, empowering you to extract deeper insights from your CFD simulations.</p> <figure> <img src="https://goswami-13.github.io/images/Post22.5/BlogLogo.gif" width="80%"> </figure> <p>Have you ever felt limited by the sheer volume of data generated by your OpenFOAM simulations? While the data holds valuable insights, extracting meaningful information can feel overwhelming. Here’s where modal decomposition methods step in! These powerful techniques offer a way to analyze your data through the lens of its dominant modes, revealing hidden patterns and providing a deeper understanding of the underlying flow phenomena. Proper Orthogonal Decomposition (POD), Dynamic Mode Decomposition (DMD), Spectral Proper Orthogonal Decomposition (SPOD), and Bi-spectral Mode Decomposition (BMD) are the main modal decomposition methods that we aim to test.</p> <p>This blog post will guide you through setting up an OpenFOAM case specifically tailored for modal decomposition analysis. We’ll delve into the key considerations for data extraction and preparation, ensuring your data is optimized for unlocking the power of these methods. By the end, you’ll be equipped to bridge the gap between raw simulation data and insightful interpretations, allowing you to gain a richer understanding of your fluid dynamics simulations.</p> <p>Lets begin!!!</p> <h1 id="problem-description">Problem Description</h1> <p>To facilitate the exploration of various modal decomposition techniques, we will focus on the dynamics of a two-dimensional flow around a square cylinder at a Reynolds number of 100. The flow will be simulated using Direct Numerical Simulations (DNS) implemented in OpenFOAM. The setup of this case will closely adhere to the configuration outlined by <a href="https://doi.org/10.1063/1.4996945" rel="external nofollow noopener" target="_blank">Bai and Alam (2018)</a> for reference. A visual representation of the domain is provided below:</p> <figure> <img src="https://goswami-13.github.io/images/Post22.5/Domain.jpg" width="80%"> </figure> <p>The choice of this specific case is deliberate. The wake generated behind the cylinder is a classic example of periodic (Kármán) vortex shedding. This phenomenon manifests as a repetitive shedding of vortices, resulting in a periodic flow regime characterized by a dominant frequency and its harmonics. These inherent characteristics render it an ideal candidate for modal decomposition investigations. Moreover, by replicating a published case, we can effectively scrutinize and validate the underlying flow physics within our simulations.</p> <h1 id="numerical-setup--0">Numerical setup : 0</h1> <p>Once the domain is established, proceed to generate a mesh using your preferred mesher. Since this is a 2D scenario, the mesh should be feasible for computation on a standard PC with 8-12 threads. Moving forward, let’s configure the boundary conditions.</p> <p>At the inlet boundary, enforce a uniform streamwise velocity (designated as $U_\infty$), while employing a pressure-outlet boundary condition at the outlet. The no-slip condition must be imposed on the surface of the cylinder. The top and bottom boundaries will be treated as slip sides, utilizing symmetric conditions. In OpenFOAM, for the 2D case, it’s necessary to specify the front and back boundaries as either empty or as slip sides with symmetric conditions. Given that this is a laminar (DNS) case, our focus will be solely on setting up boundary conditions for velocity and pressure.</p> <p>For those seeking guidance on configuring an unsteady case in OpenFOAM, refer to the link provided <a href="https://medium.com/@goswami13/the-devils-in-the-details-part-2-key-considerations-for-setting-up-complex-unsteady-cases-in-9407c82c16dc" rel="external nofollow noopener" target="_blank">here</a>.</p> <p><strong>Tip:</strong> Start with a basic pitzDaily case in OpenFOAM and adapt the necessary files to suit your specific case.</p> <p>The boundary conditions for velocity in the <code class="language-plaintext highlighter-rouge">Case/0/U</code> file will be as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>internalField   uniform <span class="o">(</span>0.015 0 0<span class="o">)</span><span class="p">;</span>
boundaryField
<span class="o">{</span>
    TOP
    <span class="o">{</span>
        <span class="nb">type                      </span>slip<span class="p">;</span>
    <span class="o">}</span>
    BOTTOM
    <span class="o">{</span>
        <span class="nb">type                      </span>slip<span class="p">;</span>
    <span class="o">}</span>
    SIDE1
    <span class="o">{</span>
        <span class="nb">type                      </span>slip<span class="p">;</span>
    <span class="o">}</span>
    SIDE2
    <span class="o">{</span>
        <span class="nb">type                      </span>slip<span class="p">;</span>
    <span class="o">}</span>
    INLET
    <span class="o">{</span>
        <span class="nb">type                      </span>fixedValue<span class="p">;</span>
        value                     uniform <span class="o">(</span>0.015 0 0<span class="o">)</span><span class="p">;</span>
    <span class="o">}</span>
    OUTLET
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient<span class="p">;</span>
    <span class="o">}</span>
    PRISM
    <span class="o">{</span>
        <span class="nb">type                      </span>noSlip <span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>The boundary conditions for pressure in <code class="language-plaintext highlighter-rouge">Case/0/p</code> file will be as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>internalField   uniform 0<span class="p">;</span>
boundaryField
<span class="o">{</span>
    TOP
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient<span class="p">;</span>
    <span class="o">}</span>
    BOTTOM
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient<span class="p">;</span>
    <span class="o">}</span>
    SIDE1
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient<span class="p">;</span>
    <span class="o">}</span>
    SIDE2
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient<span class="p">;</span>
    <span class="o">}</span>
    INLET
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient<span class="p">;</span>
    <span class="o">}</span>
    OUTLET
    <span class="o">{</span>      
        <span class="nb">type                       </span>fixedValue<span class="p">;</span>
        value                      uniform 0<span class="p">;</span>
    <span class="o">}</span>
    PRISM
    <span class="o">{</span>
        <span class="nb">type                      </span>zeroGradient <span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h1 id="numerical-setup--constant">Numerical setup : constant</h1> <p>Next, we’ll configure the <code class="language-plaintext highlighter-rouge">constant</code> folder within your case. There are two key aspects to consider: the flow will be Newtonian, and we’ll be employing Direct Numerical Simulations (DNS), indicating a laminar case.</p> <p>Modify the <code class="language-plaintext highlighter-rouge">constant/turbulenceProperties</code> file as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>simulationType  laminar<span class="p">;</span>
</code></pre></div></div> <p>And update the <code class="language-plaintext highlighter-rouge">constant/transportProperties</code> file to reflect the Newtonian fluid model:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>transportModel  Newtonian<span class="p">;</span>

nu              <span class="o">[</span>0 2 <span class="nt">-1</span> 0 0 0 0] 0.000015<span class="p">;</span>
</code></pre></div></div> <h1 id="numerical-setup--system">Numerical setup : system</h1> <p>The <code class="language-plaintext highlighter-rouge">system</code> folder serves as the locus for configuring the numerical setup of your case. As we embark on the exploration of modal decomposition techniques such as Proper Orthogonal Decomposition (POD), Dynamic Mode Decomposition (DMD), Spectral Proper Orthogonal Decomposition (SPOD), and Bi-spectral Mode Decomposition (BMD), several considerations warrant attention:</p> <ul> <li> <strong>Achieving Fully Developed Flow:</strong> Before commencing data collection, it’s imperative to ensure that the flow within the domain reaches a fully developed state. This entails allowing sufficient time for transient effects to dissipate, ensuring that the flow attains a stable and representative behavior.</li> <li> <strong>Snapshot Data Collection:</strong> Data collection should be structured around capturing snapshots or time instances of the flow field. These snapshots serve as the foundation for subsequent analysis and decomposition techniques, facilitating a comprehensive understanding of the flow dynamics.</li> <li> <strong>Verification and Validation Probes:</strong> Incorporating probes within the domain enables the verification and validation of the simulated results against established literature or experimental data. These probes serve as reference points, aiding in assessing the accuracy and fidelity of the computational model.</li> </ul> <p>Let’s delve deeper into each of these aspects to elucidate their significance in the context of modal decomposition investigations.</p> <h2 id="fully-developed-flow">Fully developed flow</h2> <p>Achieving a fully developed flow entails reaching a state where the flow characteristics stabilize and no longer vary with increased distance. In our case, where we anticipate a periodic vortex shedding phenomenon, our objective is to attain a fully developed periodic flow field. This implies running the simulation until the flow becomes statistically stationary or stable, devoid of random fluctuations or variations. A visual representation of this phenomenon might resemble the following:</p> <figure> <img src="https://goswami-13.github.io/images/Post22.5/VorticityGIF.gif" width="80%"> </figure> <p>To accomplish this, we’ll initially run the simulation for a duration equivalent to 20 Through Times. Through Time represents the duration a fluid particle requires to traverse the domain length undisturbed, calculated as:</p> \[Through-Time = \frac{Domain Length}{U_{ref}}\] <p>This ensures that we accumulate sufficient data to capture a converged transient solution, thereby setting the <code class="language-plaintext highlighter-rouge">system/constant/endTime</code> parameter appropriately.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libs <span class="o">(</span>petscFoam<span class="o">)</span><span class="p">;</span>

application     pimpleFoam<span class="p">;</span>

startFrom       latestTime<span class="p">;</span>//startTime<span class="p">;</span>

startTime       0<span class="p">;</span>

stopAt          endTime<span class="p">;</span>

endTime         4800<span class="p">;</span> // 20 Through <span class="nb">times

</span>deltaT          0.01<span class="p">;</span>

writeControl    timeStep<span class="p">;</span>

writeInterval   4600<span class="p">;</span>

purgeWrite      0<span class="p">;</span>

writeFormat     ascii<span class="p">;</span>

writePrecision  8<span class="p">;</span>

writeCompression on<span class="p">;</span>

timeFormat      general<span class="p">;</span>

timePrecision   8<span class="p">;</span>

runTimeModifiable <span class="nb">true</span><span class="p">;</span>
</code></pre></div></div> <p>To calculate the time step, denoted as $\Delta t$, we aim for a Courant-Friedrichs-Lewy (CFL) number of $\leq 0.8$ to ensure stability in our simulations. With knowledge of the minimum element size ($\Delta x$) and the free-stream velocity ($U_{ref}$), the time step can be estimated as follows:</p> \[\Delta t \leq \frac{0.8\times \Delta x}{U_{ref}}\] <p>This value is then assigned to <code class="language-plaintext highlighter-rouge">deltaT</code> in the <code class="language-plaintext highlighter-rouge">controlDict</code> file. By adhering to this criterion, we ensure that our time discretization is sufficiently fine to capture the dynamics of the flow accurately while maintaining numerical stability.</p> <h2 id="snapshot-data-collection">Snapshot data collection</h2> <p>Now, let’s delve into the data collection process crucial for modal decomposition analysis. We aim to capture multiple snapshots of the flow field, each representing a distinct time instance. Following established standards in the literature, we’ll need $2^n$ snapshots, where 𝑛 can be user-specific and case-specific. For this particular case, we’ll extract between 256 to 1024 snapshots.</p> <p>However, this data collection can only commence after reaching a fully developed, statistically stable flow. Hence, any data collection occurs after the <code class="language-plaintext highlighter-rouge">endTime</code> specified in the setup earlier.</p> <p>There are two approaches to collect snapshot data:</p> <ol> <li>Utilizing writeControl to save multiple time directories.</li> <li>Extracting required slices or surfaces using the surfaces function object.</li> </ol> <p>For the first method, after running the simulation for 20 Through Times, rerun the simulation with <code class="language-plaintext highlighter-rouge">writeControl</code> set to <code class="language-plaintext highlighter-rouge">timeStep</code> in the <code class="language-plaintext highlighter-rouge">controlDict</code> file. Regarding the <code class="language-plaintext highlighter-rouge">writeInterval</code>, let’s refer back to the flow physics as documented in <a href="https://doi.org/10.1063/1.4996945" rel="external nofollow noopener" target="_blank">Bai and Alam (2018)</a>. They report a dominant Strouhal number of <code class="language-plaintext highlighter-rouge">0.146</code> for the case of flow around a square cylinder at Reynolds number 100. This implies a shedding cycle time of approximately 46 seconds or 4600 time steps. Since we aim to extract data spanning at least 10 shedding cycles (46000 time steps) with 16-32 data points in each cycle, the <code class="language-plaintext highlighter-rouge">writeInterval</code> should be set to <code class="language-plaintext highlighter-rouge">287</code>. Ensure <code class="language-plaintext highlighter-rouge">purgeWrite</code> is disabled (set to 0) and adjust the <code class="language-plaintext highlighter-rouge">endTime</code> accordingly to encompass 10 vortex shedding cycles. Then, execute the simulation to obtain the requisite data.</p> <p>For the second method, we’ll leverage functionObjects within OpenFOAM to extract 2D slices positioned at the symmetric mid-point of our domain. This can be achieved using the <code class="language-plaintext highlighter-rouge">surfaces</code> function object as demonstrated below:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>surfaces
<span class="o">{</span>
    <span class="nb">type            </span>surfaces<span class="p">;</span>
    libs            <span class="o">(</span><span class="s2">"libsampling.so"</span><span class="o">)</span><span class="p">;</span>
    writeControl   	timeStep<span class="p">;</span>
    writeInterval   285<span class="p">;</span>

    surfaceFormat   vtk<span class="p">;</span>
	
	formatOptions
	<span class="o">{</span>
		vtk
		<span class="o">{</span>
			legacy <span class="nb">true</span><span class="p">;</span>
			format ascii<span class="p">;</span>
		<span class="o">}</span> 
	<span class="o">}</span>
	
    fields          <span class="o">(</span>p U<span class="o">)</span><span class="p">;</span>

    interpolationScheme cellPoint<span class="p">;</span>

    surfaces
    <span class="o">{</span>
        zNormal
        <span class="o">{</span>
            <span class="nb">type        </span>cuttingPlane<span class="p">;</span>
            point       <span class="o">(</span>0 0 0<span class="o">)</span><span class="p">;</span>
            normal      <span class="o">(</span>0 0 1<span class="o">)</span><span class="p">;</span>
            interpolate <span class="nb">true</span><span class="p">;</span>
        <span class="o">}</span>
    <span class="o">}</span><span class="p">;</span>
<span class="o">}</span><span class="p">;</span>
</code></pre></div></div> <h2 id="validation">Validation</h2> <p>To validate our setup against the case of <a href="https://doi.org/10.1063/1.4996945" rel="external nofollow noopener" target="_blank">Bai and Alam (2018)</a>, we’ll compare the Strouhal number and mean drag and lift coefficients obtained from our numerical simulation with their study. To begin, we’ll position multiple probes within our domain to extract velocity and pressure downstream of the cylinder, where vortex shedding is prominent. We’ll employ the probes function object for this purpose, as illustrated below:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>probes
<span class="o">{</span>
    <span class="nb">type            </span>probes<span class="p">;</span>
    libs            <span class="o">(</span><span class="s2">"libsampling.so"</span><span class="o">)</span><span class="p">;</span>

    // Name of the directory <span class="k">for </span>probe data
    name            probes<span class="p">;</span>

    // Write at same frequency as fields
    writeControl    timeStep<span class="p">;</span>
    writeInterval   1<span class="p">;</span>

fields <span class="o">(</span>
        p 
        U 
       <span class="o">)</span><span class="p">;</span>

probeLocations
<span class="o">(</span>

	<span class="o">(</span>0.15 0.05 0<span class="o">)</span>
	<span class="o">(</span>0.15 0 0<span class="o">)</span>
	<span class="o">(</span>0.15 <span class="nt">-0</span>.05 0<span class="o">)</span>
	
	<span class="o">(</span>0.35 0.1 0<span class="o">)</span>
	<span class="o">(</span>0.35 0.05 0<span class="o">)</span>
	<span class="o">(</span>0.35 0 0<span class="o">)</span>
	<span class="o">(</span>0.35 <span class="nt">-0</span>.05 0<span class="o">)</span>
	<span class="o">(</span>0.35 <span class="nt">-0</span>.1 0<span class="o">)</span>
	
	<span class="o">(</span>0.55 0.1 0<span class="o">)</span>
	<span class="o">(</span>0.55 <span class="nt">-0</span>.05 0<span class="o">)</span>
	<span class="o">(</span>0.55 0 0<span class="o">)</span>
	<span class="o">(</span>0.55 <span class="nt">-0</span>.05 0<span class="o">)</span>
	<span class="o">(</span>0.55 <span class="nt">-0</span>.1 0<span class="o">)</span>
	
<span class="o">)</span><span class="p">;</span>
    // Optional: filter out points that haven<span class="s1">'t been found. Default
    //           is to include them (with value -VGREAT)
    includeOutOfBounds  true;
}
</span></code></pre></div></div> <p>To extract the drag and lift coefficients, utilize the <code class="language-plaintext highlighter-rouge">forceCoeffs</code> function object as depicted below:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>forces
    <span class="o">{</span>
        <span class="nb">type            </span>forceCoeffs<span class="p">;</span>
        libs <span class="o">(</span> <span class="s2">"libforces.so"</span> <span class="o">)</span><span class="p">;</span>
    
        writeControl   timeStep<span class="p">;</span>
        writeInterval  1<span class="p">;</span>
        
        patches         <span class="o">(</span> <span class="s2">"PRISM"</span> <span class="o">)</span><span class="p">;</span>
        
        rho             rhoInf<span class="p">;</span>
        log             <span class="nb">true</span><span class="p">;</span>
        rhoInf          1.225<span class="p">;</span>
        liftDir         <span class="o">(</span>0 1 0<span class="o">)</span><span class="p">;</span>
        dragDir         <span class="o">(</span>1 0 0<span class="o">)</span><span class="p">;</span>
        //sideDir         <span class="o">(</span>0 0 1<span class="o">)</span><span class="p">;</span>
        CofR            <span class="o">(</span>0 0 0<span class="o">)</span><span class="p">;</span>
        pitchAxis       <span class="o">(</span>0 0 1<span class="o">)</span><span class="p">;</span>
        magUInf         0.015<span class="p">;</span>
        lRef            0.1<span class="p">;</span>
        Aref            0.01<span class="p">;</span>
    <span class="o">}</span>
</code></pre></div></div> <p>Next, we’ll extract velocity and pressure signals from the probes and compute the fast Fourier transform to determine the dominant Strouhal number of the vortex shedding process, comparing it with published data. Subsequently, we’ll compute the time-average of the drag and lift coefficient data and perform a similar comparison. For guidance on post-processing using Python, refer to my previous <a href="https://medium.com/gitconnected/dive-deeper-with-fluidfoam-advanced-techniques-for-extracting-analyzing-openfoam-data-in-python-1c247376df63" rel="external nofollow noopener" target="_blank">article</a>.</p> <p>Following these instructions, your case will be primed for investigation using any modal decomposition methods. You can find a reference case setup for the flow around a square cylinder at Reynolds number 100 <a href="https://github.com/goswami-13/SquareCylinderRe100.git" rel="external nofollow noopener" target="_blank">here</a>.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> <d-article> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/06/blog-post-54/">Tabulating 6-DOF Motion Kinematics in OpenFOAM using Python</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/06/blog-post-53/">Setting Up Overset Mesh Cases in OpenFOAM Made Easy</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/06/blog-post-52/">An Introduction to Overset Mesh in OpenFOAM</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/05/blog-post-51/">Python Tools for Analyzing and Visualizing Mesh Motion Simulations</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/03/blog-post-50/">Simulating Pure Pitching and Heaving Motions in OpenFOAM</a> </li> <br> <br> </d-article> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shubham Goswami, PhD. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script src="/assets/js/distillpub/overrides.js"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script defer src="/assets/js/mermaid-setup.js?38ca0a0126f7328d2d9a46bad640931f" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/js/diff2html-ui.min.js" integrity="sha256-eU2TVHX633T1o/bTQp6iIJByYJEtZThhF9bKz/DcbbY=" crossorigin="anonymous"></script> <script defer src="/assets/js/diff2html-setup.js?80a6e52ce727518bbd3aed2bb6ba5601" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js" integrity="sha256-MgH13bFTTNqsnuEoqNPBLDaqxjGH+lCpqrukmXc8Ppg=" crossorigin="anonymous"></script> <script defer src="/assets/js/leaflet-setup.js?b6313931e203b924523e2d8b75fe8874" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" integrity="sha256-0q+JdOlScWOHcunpUk21uab1jW7C1deBQARHtKMcaB4=" crossorigin="anonymous"></script> <script defer src="/assets/js/chartjs-setup.js?183c5859923724fb1cb3c67593848e71" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js" integrity="sha256-QvgynZibb2U53SsVu98NggJXYqwRL7tg3FeyfXvPOUY=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/theme/dark-fresh-cut.js" integrity="sha256-sm6Ui9w41++ZCWmIWDLC18a6ki72FQpWDiYTDxEPXwU=" crossorigin="anonymous"></script> <script defer src="/assets/js/echarts-setup.js?738178999630746a8d0cfc261fc47c2c" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega@5.27.0/build/vega.min.js" integrity="sha256-Yot/cfgMMMpFwkp/5azR20Tfkt24PFqQ6IQS+80HIZs=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3/build/vega-lite.min.js" integrity="sha256-TvBvIS5jUN4BSy009usRjNzjI1qRrHPYv7xVLJyjUyw=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-embed@6.24.0/build/vega-embed.min.js" integrity="sha256-FPCJ9JYCC9AZSpvC/t/wHBX7ybueZhIqOMjpWqfl3DU=" crossorigin="anonymous"></script> <script defer src="/assets/js/vega-setup.js?7c7bee055efe9312afc861b128fe5f36" type="text/javascript"></script> <script defer src="https://tikzjax.com/v1/tikzjax.js" integrity="sha256-+1qyucCXRZJrCg3lm3KxRt/7WXaYhBid4/1XJRHGB1E=" crossorigin="anonymous"></script> <script src="/assets/js/typograms.js?062e75bede72543443762dc3fe36c7a5"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>
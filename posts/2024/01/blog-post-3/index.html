<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> First Steps : Setting up your first case in OpenFOAM | Shubham Goswami, PhD </title> <meta name="author" content="Shubham Goswami, PhD"> <meta name="description" content="Personal and professional website of Shubham Goswami, PhD. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/ICON.png?c7fe2dd74e1dc70566e7483ec7cc293d"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://goswami-13.github.io/posts/2024/01/blog-post-3/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" integrity="sha256-q9ba7o845pMPFU+zcAll8rv+gC+fSovKsOoNQ6cynuQ=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css" integrity="sha256-Oppd74ucMR5a5Dq96FxjEzGF7tTw2fZ/6ksAqDCM8GY=" crossorigin="anonymous" media="screen and (prefers-color-scheme: light)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" integrity="sha256-nyCNAiECsdDHrr/s2OQsp5l9XeY2ZJ0rMepjCT2AkBk=" crossorigin="anonymous" media="screen and (prefers-color-scheme: dark)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/css/diff2html.min.css" integrity="sha256-IMBK4VNZp0ivwefSn51bswdsrhk0HoMTLc2GqFHFBXg=" crossorigin="anonymous"> <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css"> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "First Steps : Setting up your first case in OpenFOAM",
            "description": "",
            "published": "January 22, 2024",
            "authors": [
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Shubham</span> Goswami, PhD </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Guides </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>First Steps : Setting up your first case in OpenFOAM</h1> <p></p> </d-title> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> </nav> </d-contents> <p>Explore OpenFOAM with our step-by-step guide to getting your first simulation up and running. This easy-to-follow tutorial covers everything you need to know about setting up and running a basic OpenFOAM case. I break down the jargon into simple terms, explaining each step in both everyday language and plain fluid dynamics terms, so you can understand the ins and outs of your OpenFOAM case.</p> <figure> <img src="https://goswami-13.github.io/images/figure.png" width="90%"> </figure> <p>Embracing the wisdom of Prometheus, who once stated, ‘Big things have small beginnings,’ let’s kick off our OpenFOAM journey with a straightforward problem to understand the structure of an OpenFOAM simulation. In this instance, we’ll delve into the realm of a steady, turbulent, incompressible flow over a backward-facing step. Our simulation aims to mirror an experiment conducted in 1983 by Robert W. Pitz and John W. Daily (<a href="https://doi.org/10.2514/6.1981-106" rel="external nofollow noopener" target="_blank">Reference</a>). Their study sought to evaluate the impact of combustion on key flow field properties, including mixing layer growth, entrainment rate, and reattachment length. I will, however, stick to setting up the case.</p> <h2 id="case-setup">Case setup</h2> <p>This specific case is available in the OpenFOAM tutorials under <code class="language-plaintext highlighter-rouge">~/OpenFOAM/OpenFOAM-v2312/tutorials/incompressible/simpleFoam/</code> or can be downloaded from <a href="https://github.com/goswami-13/OpenFOAM-cases.git" rel="external nofollow noopener" target="_blank">here</a>.</p> <p>Once you access this case, you’ll come across three folders - 0, constant, and system. Let’s break down their roles:</p> <ul> <li>The “0” folder, a time directory, houses initial and boundary conditions crucial for the simulation. It includes specific files for various fields like velocity (“U”), pressure (“p”), and more.</li> <li>In the “constant” directory, you’ll find files detailing fluid properties, specifying turbulence modeling, and providing a comprehensive description of the domain mesh within a sub-directory named “polyMesh”.</li> <li>The “system” directory contains crucial “settings” files related to the solution process. It should feature at least three files: “controlDict” for defining simulation control parameters like start/end time and time step; “fvSchemes” for setting discretization schemes; and “fvSolution” for establishing algorithm and solver tolerances.</li> </ul> <p>In simpler terms, “0” sets the boundary conditions, “constant” handles fluid properties, simulation type, and mesh details, while “system” configures the solver settings in the world of OpenFOAM.</p> <h2 id="problem-description">Problem Description</h2> <figure> <img src="https://goswami-13.github.io/images/Post3/figure.png" width="60%"> </figure> <p>As illustrated in the above figure, we consider a 2-dimensional domain comprising a brief inlet, a backward-facing step, and a converging nozzle at the outlet. The governing equations include the continuity equation: \(\nabla \cdot u = 0\)</p> <p>and the momentum or Navier-Stokes equations:</p> \[\nabla\cdot(uu) = -\frac{1}{\rho}\Delta p + \nu \nabla^2u\] <p>The initial conditions are set as $u = 0$ m/s and $p = 0$ Pa.</p> <p>For boundary conditions, we have:</p> <ul> <li>Inlet with a fixed velocity of $u = (10, 0, 0) m/s$</li> <li>Outlet with a fixed pressure of $p = 0$ Pa</li> <li>No-slip conditions applied at the walls.</li> </ul> <p>he fluid property we configure is the kinematic viscosity of air, set at $1\times 10^-5$ $m^2/s$.</p> <p>To simulate the flow, I will employ the Standard k-$\varepsilon$ turbulence model and execute the simulation using the <em>simpleFoam</em> solver. This solver is an implementation of the SIMPLE algorithm.</p> <h3 id="0">0</h3> <p>This directory encompasses essential files containing the specified initial and boundary conditions. Since I’ve opted for the Standard k-$\varepsilon$ turbulence model, the necessary files include “U,” “p,” “k,” “epsilon,” “nut,” and “nuTilda.” If I were to choose the Standard k-$\omega$ turbulence model or k-$\omega$ SST model, I would utilize the “omega” file. While I’ve outlined the initial and boundary conditions for velocity and pressure, I haven’t explicitly mentioned them for k, epsilon, omega, nu, and nuTilda. This is because the boundary conditions for these quantities are derived from the flow’s physics.</p> <p>To estimate the initial values for k, epsilon, and omega, the following formulas can be employed:</p> \[k = \frac{3}{2}(T_I U_{ref})^2, \qquad \varepsilon = C_\mu \frac{k^{1.5}}{L}, \qquad \omega = \frac{k^{0.5}}{L}\] <p>In these equations, $T_I$ represents turbulence intensity, $U_{\text{ref}}$ is the reference velocity (essentially equivalent to the inlet velocity), and $L$ denotes the characteristic length scale. The constant $C_\mu$ is assigned a value of 0.09.</p> <h3 id="constant">constant</h3> <p>This folder sets up the fluid constants and the simulation type. Simple enough!!!</p> <h3 id="system">system</h3> <p>In my opinion, this folder holds high importance in the setup process. If your simulation encounters divergence or fails to run, more often than not, the culprit lies within this directory. I’ll delve into the contents of this folder extensively in my debugging article. For now, it should contain at least three crucial files: controlDict, fvSolution, and fvSchemes. Everything beyond these is either an add-on or case-specific.</p> <ul> <li> <em>controlDict</em> : Think of this file as equivalent to solver settings in ANSYS. It configures case controls, specifying when to halt the simulation, the time step size, intervals for writing output files, and more.</li> <li> <em>fvSchemes</em> : This file establishes the numerical schemes for terms in the continuity and Navier-Stokes equations. In our case, we need to define schemes for $\nabla\cdot, \nabla,$ and $\nabla^2$, representing divergence, gradient, and laplacian terms in the equation.</li> <li> <em>fvSolution</em> : Here, you set the solver parameters, tolerances, and algorithm preferences. In our scenario, we require a solver for p, U, k, and epsilon terms, and we’ll be using the SIMPLE algorithm.</li> </ul> <p>In the controlDict file, set the time step (deltaT) to 1 for steady-state cases like this, where it serves effectively as an iteration counter. Knowing from experience that 2000 iterations are needed for reasonable convergence, set endTime to 2000. Ensure that writeInterval is sufficiently high, e.g., 100, to avoid filling the hard disk with data during runtime.</p> <p>For fvSchemes, choose steadyState as the timeScheme; set gradSchemes and laplacianSchemes to default to Gauss; and use upwind for divSchemes to ensure boundedness. More details on this will be explained later.</p> <p>Pay special attention to the solver settings in the fvSolution dictionary. Although the top-level simpleFoam code deals with equations for p and U only, the turbulence model solves equations for k and epsilon, necessitating tolerance settings for all equations. A tolerance of $10^{-5}$ and relTol of 0.1 are acceptable for most variables, except for p, where a tolerance of $10^{-6}$ and relTol of 0.01 are recommended. Under-relaxation of the solution is required due to the steady nature of the problem. A relaxationFactor of 0.7 is acceptable for U, k, and epsilon, but 0.3 is required for p to avoid numerical instability.</p> <p>Now, you might be wondering, where does the mesh come into play? There are two methods: using a blockMesh file (in the system folder) or creating a mesh on another tool (like ANSYS ICEM or GMSH) and exporting it in <code class="language-plaintext highlighter-rouge">.msh</code> format. In this case, we’ll opt for the first method!!!</p> <h2 id="running-the-case">Running the case</h2> <p>Running the simulation is a straightforward process:</p> <ol> <li>Navigate to the directory where you downloaded or copied the case file. Open a terminal at this location. Hint: When you type <code class="language-plaintext highlighter-rouge">ls</code>, you should see <code class="language-plaintext highlighter-rouge">0 constant system</code>.</li> <li>Activate the OpenFOAM environment. This means, source the <code class="language-plaintext highlighter-rouge">etc/bashrc</code> file or if you made the alias use that. For me, I will type <code class="language-plaintext highlighter-rouge">OF2312</code> to source the OpenFOAM environment.</li> <li>Generate the mesh. Type in <code class="language-plaintext highlighter-rouge">blockMesh</code>. Remember, OpenFOAM is case sensitive!!!</li> <li>Run the case. Type in <code class="language-plaintext highlighter-rouge">simpleFoam</code> </li> </ol> <p>Simple enough!!!</p> <h2 id="post-processing">Post-processing</h2> <p>Now that the simulation is complete, let’s explore the results. To do this, simply download <a href="https://www.paraview.org/Wiki/ParaView" rel="external nofollow noopener" target="_blank">ParaView</a>, a powerful visualization tool. Once installed, open your controlDict file in ParaView to visualize the results. Here are some outputs from this simulation</p> <figure> <img src="https://goswami-13.github.io/images/Post3/U.png" width="60%"> <img src="https://goswami-13.github.io/images/Post3/p.png" width="60%"> <img src="https://goswami-13.github.io/images/Post3/epsilon.png" width="60%"> <img src="https://goswami-13.github.io/images/Post3/k.png" width="60%"> <img src="https://goswami-13.github.io/images/Post3/nut.png" width="60%"> </figure> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> <d-article> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/06/blog-post-54/">Tabulating 6-DOF Motion Kinematics in OpenFOAM using Python</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/06/blog-post-53/">Setting Up Overset Mesh Cases in OpenFOAM Made Easy</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/06/blog-post-52/">An Introduction to Overset Mesh in OpenFOAM</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/05/blog-post-51/">Python Tools for Analyzing and Visualizing Mesh Motion Simulations</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/posts/2025/03/blog-post-50/">Simulating Pure Pitching and Heaving Motions in OpenFOAM</a> </li> <br> <br> </d-article> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shubham Goswami, PhD. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script src="/assets/js/distillpub/overrides.js"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script defer src="/assets/js/mermaid-setup.js?38ca0a0126f7328d2d9a46bad640931f" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/js/diff2html-ui.min.js" integrity="sha256-eU2TVHX633T1o/bTQp6iIJByYJEtZThhF9bKz/DcbbY=" crossorigin="anonymous"></script> <script defer src="/assets/js/diff2html-setup.js?80a6e52ce727518bbd3aed2bb6ba5601" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js" integrity="sha256-MgH13bFTTNqsnuEoqNPBLDaqxjGH+lCpqrukmXc8Ppg=" crossorigin="anonymous"></script> <script defer src="/assets/js/leaflet-setup.js?b6313931e203b924523e2d8b75fe8874" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" integrity="sha256-0q+JdOlScWOHcunpUk21uab1jW7C1deBQARHtKMcaB4=" crossorigin="anonymous"></script> <script defer src="/assets/js/chartjs-setup.js?183c5859923724fb1cb3c67593848e71" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js" integrity="sha256-QvgynZibb2U53SsVu98NggJXYqwRL7tg3FeyfXvPOUY=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/theme/dark-fresh-cut.js" integrity="sha256-sm6Ui9w41++ZCWmIWDLC18a6ki72FQpWDiYTDxEPXwU=" crossorigin="anonymous"></script> <script defer src="/assets/js/echarts-setup.js?738178999630746a8d0cfc261fc47c2c" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega@5.27.0/build/vega.min.js" integrity="sha256-Yot/cfgMMMpFwkp/5azR20Tfkt24PFqQ6IQS+80HIZs=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3/build/vega-lite.min.js" integrity="sha256-TvBvIS5jUN4BSy009usRjNzjI1qRrHPYv7xVLJyjUyw=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-embed@6.24.0/build/vega-embed.min.js" integrity="sha256-FPCJ9JYCC9AZSpvC/t/wHBX7ybueZhIqOMjpWqfl3DU=" crossorigin="anonymous"></script> <script defer src="/assets/js/vega-setup.js?7c7bee055efe9312afc861b128fe5f36" type="text/javascript"></script> <script defer src="https://tikzjax.com/v1/tikzjax.js" integrity="sha256-+1qyucCXRZJrCg3lm3KxRt/7WXaYhBid4/1XJRHGB1E=" crossorigin="anonymous"></script> <script src="/assets/js/typograms.js?062e75bede72543443762dc3fe36c7a5"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>